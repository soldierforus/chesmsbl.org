extends ../layout

block content
  section.page-header: div.container
    h1 Register
  section: div.container
    div.row
      div.col-md-6.col-sm-6
        form#register.sky-form.boxed(role="form" data-toggle="validator")
          header.size-18.margin-bottom-20
            i.fa.fa-users
            |  Register
          fieldset.nomargin
            div.form-group
              label.input.margin-bottom-10
                i.ico-append.fa.fa-envelope
              input#email.form-control(required type="email" placeholder="Email address")
              div.help-block.with-errors
            div.form-group
              label.input.margin-bottom-10
                i.ico-append.fa.fa-lock
              input#password.form-control(required type="password" placeholder="Password" data-minlength="8")
              div.help-block.with-errors
            div.form-group.margin-top-30
              label.checkbox.nomargin
                input.checked-agree(required type="checkbox" name="checkbox")
                i
                |  I agree to the
                a(href="/terms" target="_blank")  Terms of Service
                div.help-block.with-errors
          div.row.margin-bottom-20: div.col-md-12
            button#register.btn.btn-success(type="submit")
              i.fa.fa-check
              |  REGISTER
      div.col-md-6.col-sm-6
        form.sky-form.boxed
          header.size-18.margin-bottom-20 Register using your favorite social provider
          fieldset.nomargin
            div.row
              div.col-md-8.col-md-offset-2
                a#facebook-signup.btn.btn-block.btn-social.btn-facebook.margin-bottom-10
                  i.fa.fa-facebook
                  |  Sign up with Facebook
                a#google-signup.btn.btn-block.btn-social.btn-google.margin-bottom-10
                  i.fa.fa-google
                  |  Sign up with Google
          footer
            | Already have an account yet?
            a(href="/register"): strong
              |  Login here!

block scripts
  script.
    var auth0 = new Auth0({
      domain: '#{AUTH0_DOMAIN}',
      clientID: '#{AUTH0_CLIENT_ID}',
      callbackURL: '#{AUTH0_CALLBACK_URL}',
    });

    $(document).ready(function() {

      $('#register').validator().on('submit', function register(e) {
        if (!e.isDefaultPrevented()) {
          e.preventDefault();
          auth0.signup({
           connection: 'Username-Password-Authentication',
           username:   $('#email').val(),
           password:   $('#password').val(),
         });
        }
      });

      $('#google-signup').click(function googleSignup(e) {
        e.preventDefault();
        auth0.login({ connection: 'google-oauth2' });
      });

      $('#facebook-signup').click(function facebookSignup(e) {
        e.preventDefault();
        auth0.login({ connection: 'facebook' });
      });
    });