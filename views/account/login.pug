extends ../layout

block content
  section.page-header: div.container
    h1 LOGIN
  section: div.container
    div.row
      div.col-md-6.col-sm-6
        form#login.sky-form.boxed(role="form" data-toggle="validator")
          header.size-18.margin-bottom-20
            i.fa.fa-user
            |  I'm a returning user
          fieldset.nomargin
            div.form-group
              label.input.margin-bottom-10
                i.ico-append.fa.fa-envelope
              input#email.form-control(required type="email" placeholder="Email address")
              div.help-block.with-errors
            div.form-group
              label.input.margin-bottom-10
                i.ico-append.fa.fa-lock
              input#password.form-control(required type="password" placeholder="Password")
              div.help-block.with-errors
            div.clearfix.note.margin-bottom-30
              a.pull-right(href="/forgot") Forgot Password?
            div.form-group
              label.checkbox.weight-300
                input(type="checkbox" name="checkbox-inline")
                i
                | Keep me logged in
          footer: button#login.btn.btn-success.noradius.pull-right(type="submit")
            i.fa.fa-check
            |  OK, LOG IN
      div.col-md-6.col-sm-6
        form.sky-form.boxed
          header.size-18.margin-bottom-20 Sign in with a social provider
          fieldset.nomargin
            div.row
              div.col-md-8.col-md-offset-2
                a#facebook-signin.btn.btn-block.btn-social.btn-facebook.margin-bottom-10
                  i.fa.fa-facebook
                  |  Sign in with Facebook
                a#google-signin.btn.btn-block.btn-social.btn-google.margin-bottom-10
                  i.fa.fa-google
                  |  Sign in with Google
          footer
            | Don't have an account yet?
            a(href="/register"): strong
              |  Click to register!

block scripts
  script.
    var auth0 = new Auth0({
      domain: '#{AUTH0_DOMAIN}',
      clientID: '#{AUTH0_CLIENT_ID}',
      callbackURL: '#{AUTH0_CALLBACK_URL}',
    });

    $(document).ready(function() {
      $('#login').validator().on('submit', function register(e) {
        if (!e.isDefaultPrevented()) {
          e.preventDefault();
          auth0.login({
           connection: 'Username-Password-Authentication',
           username:   $('#email').val(),
           password:   $('#password').val(),
          });
        }
      });

      $('#google-signin').click(function(e) {
        e.preventDefault();
        auth0.login({ connection: 'google-oauth2' });
      });

      $('#facebook-signin').click(function(e) {
        e.preventDefault();
        auth0.login({ connection: 'facebook' });
      });
    });